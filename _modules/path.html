<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>path &#8212; biobox 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">biobox 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for path</h1><div class="highlight"><pre>
<span class="c">#</span>
<span class="c"># Copyright (c) 2010 Mikhail Gusarov</span>
<span class="c">#</span>
<span class="c"># Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="c"># of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="c"># in the Software without restriction, including without limitation the rights</span>
<span class="c"># to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="c"># copies of the Software, and to permit persons to whom the Software is</span>
<span class="c"># furnished to do so, subject to the following conditions:</span>
<span class="c">#</span>
<span class="c"># The above copyright notice and this permission notice shall be included in</span>
<span class="c"># all copies or substantial portions of the Software.</span>
<span class="c">#</span>
<span class="c"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="c"># IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="c"># FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="c"># AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="c"># LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="c"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="c"># SOFTWARE.</span>
<span class="c">#</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">path.py - An object representing a path to a file or directory.</span>

<span class="sd">https://github.com/jaraco/path.py</span>

<span class="sd">Example::</span>

<span class="sd">    from path import Path</span>
<span class="sd">    d = Path(&#39;/home/guido/bin&#39;)</span>
<span class="sd">    for f in d.files(&#39;*.py&#39;):</span>
<span class="sd">        f.chmod(0o755)</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">unicode_literals</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">fnmatch</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">errno</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">functools</span>
<span class="kn">import</span> <span class="nn">operator</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">contextlib</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">from</span> <span class="nn">distutils</span> <span class="k">import</span> <span class="n">dir_util</span>
<span class="kn">import</span> <span class="nn">importlib</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">win32security</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pwd</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">grp</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c">##############################################################################</span>
<span class="c"># Python 2/3 support</span>
<span class="n">PY3</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,)</span>
<span class="n">PY2</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">PY3</span>

<span class="n">string_types</span> <span class="o">=</span> <span class="nb">str</span><span class="p">,</span>
<span class="n">text_type</span> <span class="o">=</span> <span class="nb">str</span>
<span class="n">getcwdu</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span>

<span class="k">def</span> <span class="nf">surrogate_escape</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulate the Python 3 ``surrogateescape`` handler, but for Python 2 only.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">chars</span> <span class="o">=</span> <span class="n">error</span><span class="o">.</span><span class="n">object</span><span class="p">[</span><span class="n">error</span><span class="o">.</span><span class="n">start</span><span class="p">:</span><span class="n">error</span><span class="o">.</span><span class="n">end</span><span class="p">]</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">val</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span>
    <span class="n">val</span> <span class="o">+=</span> <span class="mh">0xdc00</span>
    <span class="k">return</span> <span class="n">__builtin__</span><span class="o">.</span><span class="n">unichr</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="n">error</span><span class="o">.</span><span class="n">end</span>

<span class="k">if</span> <span class="n">PY2</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">__builtin__</span>
    <span class="n">string_types</span> <span class="o">=</span> <span class="n">__builtin__</span><span class="o">.</span><span class="n">basestring</span><span class="p">,</span>
    <span class="n">text_type</span> <span class="o">=</span> <span class="n">__builtin__</span><span class="o">.</span><span class="n">unicode</span>
    <span class="n">getcwdu</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwdu</span>
    <span class="n">codecs</span><span class="o">.</span><span class="n">register_error</span><span class="p">(</span><span class="s">&#39;surrogateescape&#39;</span><span class="p">,</span> <span class="n">surrogate_escape</span><span class="p">)</span>

<span class="nd">@contextlib</span><span class="o">.</span><span class="n">contextmanager</span>
<span class="k">def</span> <span class="nf">io_error_compat</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span>
    <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">io_err</span><span class="p">:</span>
        <span class="c"># On Python 2, io.open raises IOError; transform to OSError for</span>
        <span class="c"># future compatibility.</span>
        <span class="n">os_err</span> <span class="o">=</span> <span class="ne">OSError</span><span class="p">(</span><span class="o">*</span><span class="n">io_err</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="n">os_err</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">io_err</span><span class="p">,</span> <span class="s">&#39;filename&#39;</span><span class="p">,</span> <span class="k">None</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">os_err</span>

<span class="c">##############################################################################</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Path&#39;</span><span class="p">,</span> <span class="s">&#39;CaseInsensitivePattern&#39;</span><span class="p">]</span>


<span class="n">LINESEPS</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;</span><span class="se">\r\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\r</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">]</span>
<span class="n">U_LINESEPS</span> <span class="o">=</span> <span class="n">LINESEPS</span> <span class="o">+</span> <span class="p">[</span><span class="s">&#39;</span><span class="se">\u0085</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\u2028</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\u2029</span><span class="s">&#39;</span><span class="p">]</span>
<span class="n">NEWLINE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">LINESEPS</span><span class="p">))</span>
<span class="n">U_NEWLINE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">U_LINESEPS</span><span class="p">))</span>
<span class="n">NL_END</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&#39;(?:{0})$&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">NEWLINE</span><span class="o">.</span><span class="n">pattern</span><span class="p">))</span>
<span class="n">U_NL_END</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&#39;(?:{0})$&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">U_NEWLINE</span><span class="o">.</span><span class="n">pattern</span><span class="p">))</span>


<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pkg_resources</span>
    <span class="n">__version__</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="s">&#39;path.py&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">version</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">__version__</span> <span class="o">=</span> <span class="s">&#39;unknown&#39;</span>
<span class="k">except</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">DistributionNotFound</span><span class="p">:</span>
    <span class="n">__version__</span> <span class="o">=</span> <span class="s">&#39;unknown&#39;</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">__version__</span> <span class="o">=</span> <span class="s">&#39;unknown&#39;</span>


<span class="k">class</span> <span class="nc">TreeWalkWarning</span><span class="p">(</span><span class="ne">Warning</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="c"># from jaraco.functools</span>
<span class="k">def</span> <span class="nf">compose</span><span class="p">(</span><span class="o">*</span><span class="n">funcs</span><span class="p">):</span>
    <span class="n">compose_two</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">:</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">f1</span><span class="p">(</span><span class="n">f2</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">compose_two</span><span class="p">,</span> <span class="n">funcs</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">simple_cache</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save results for the :meth:&#39;path.using_module&#39; classmethod.</span>
<span class="sd">    When Python 3.2 is available, use functools.lru_cache instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">saved_results</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">module</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">in</span> <span class="n">saved_results</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">saved_results</span><span class="p">[</span><span class="n">module</span><span class="p">]</span>
        <span class="n">saved_results</span><span class="p">[</span><span class="n">module</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">module</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">saved_results</span><span class="p">[</span><span class="n">module</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">wrapper</span>


<span class="k">class</span> <span class="nc">ClassProperty</span><span class="p">(</span><span class="nb">property</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">owner</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fget</span><span class="o">.</span><span class="n">__get__</span><span class="p">(</span><span class="k">None</span><span class="p">,</span> <span class="n">owner</span><span class="p">)()</span>


<span class="k">class</span> <span class="nc">multimethod</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Acts like a classmethod when invoked from the class and like an</span>
<span class="sd">    instancemethod when invoked from the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="o">=</span> <span class="n">func</span>

    <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">owner</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="n">owner</span><span class="p">)</span> <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="k">None</span>
            <span class="k">else</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span>
        <span class="p">)</span>


<div class="viewcode-block" id="Path"><a class="viewcode-back" href="../measures.html#path.Path">[docs]</a><span class="k">class</span> <span class="nc">Path</span><span class="p">(</span><span class="n">text_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a filesystem path.</span>

<span class="sd">    For documentation on individual methods, consult their</span>
<span class="sd">    counterparts in :mod:`os.path`.</span>

<span class="sd">    Some methods are additionally included from :mod:`shutil`.</span>
<span class="sd">    The functions are linked directly into the class namespace</span>
<span class="sd">    such that they will be bound to the Path instance. For example,</span>
<span class="sd">    ``Path(src).copy(target)`` is equivalent to</span>
<span class="sd">    ``shutil.copy(src, target)``. Therefore, when referencing</span>
<span class="sd">    the docs for these methods, assume `src` references `self`,</span>
<span class="sd">    the Path instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">module</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span>
    <span class="sd">&quot;&quot;&quot; The path module to use for path operations.</span>

<span class="sd">    .. seealso:: :mod:`os.path`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="k">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;Invalid initial value for path: None&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@simple_cache</span>
    <span class="k">def</span> <span class="nf">using_module</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">module</span><span class="p">):</span>
        <span class="n">subclass_name</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">__name__</span> <span class="o">+</span> <span class="s">&#39;_&#39;</span> <span class="o">+</span> <span class="n">module</span><span class="o">.</span><span class="n">__name__</span>
        <span class="k">if</span> <span class="n">PY2</span><span class="p">:</span>
            <span class="n">subclass_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">subclass_name</span><span class="p">)</span>
        <span class="n">bases</span> <span class="o">=</span> <span class="p">(</span><span class="n">cls</span><span class="p">,)</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;module&#39;</span><span class="p">:</span> <span class="n">module</span><span class="p">}</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">subclass_name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">ns</span><span class="p">)</span>

    <span class="nd">@ClassProperty</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_next_class</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        What class should be used to construct new instances from this class</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cls</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_always_unicode</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensure the path as retrieved from a Python API, such as :func:`os.listdir`,</span>
<span class="sd">        is a proper Unicode string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">PY3</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">text_type</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">path</span>
        <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getfilesystemencoding</span><span class="p">(),</span> <span class="s">&#39;surrogateescape&#39;</span><span class="p">)</span>

    <span class="c"># --- Special Python methods.</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;%s(%s)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="nb">super</span><span class="p">(</span><span class="n">Path</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__repr__</span><span class="p">())</span>

    <span class="c"># Adding a Path and a string yields a Path.</span>
    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">more</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="nb">super</span><span class="p">(</span><span class="n">Path</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__add__</span><span class="p">(</span><span class="n">more</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>  <span class="c"># Python bug</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="nf">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="c"># The / operator joins Paths.</span>
    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rel</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; fp.__div__(rel) == fp / rel == fp.joinpath(rel)</span>

<span class="sd">        Join two path components, adding a separator character if</span>
<span class="sd">        needed.</span>

<span class="sd">        .. seealso:: :func:`os.path.join`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rel</span><span class="p">))</span>

    <span class="c"># Make the / operator work even when true division is enabled.</span>
    <span class="n">__truediv__</span> <span class="o">=</span> <span class="n">__div__</span>

    <span class="c"># The / operator joins Paths the other way around</span>
    <span class="k">def</span> <span class="nf">__rdiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rel</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; fp.__rdiv__(rel) == rel / fp</span>

<span class="sd">        Join two path components, adding a separator character if</span>
<span class="sd">        needed.</span>

<span class="sd">        .. seealso:: :func:`os.path.join`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rel</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>

    <span class="c"># Make the / operator work even when true division is enabled.</span>
    <span class="n">__rtruediv__</span> <span class="o">=</span> <span class="n">__rdiv__</span>

    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_old_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_old_dir</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="Path.getcwd"><a class="viewcode-back" href="../measures.html#path.Path.getcwd">[docs]</a>    <span class="k">def</span> <span class="nf">getcwd</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the current working directory as a path object.</span>

<span class="sd">        .. seealso:: :func:`os.getcwdu`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cls</span><span class="p">(</span><span class="n">getcwdu</span><span class="p">())</span></div>

    <span class="c">#</span>
    <span class="c"># --- Operations on Path strings.</span>

<div class="viewcode-block" id="Path.abspath"><a class="viewcode-back" href="../measures.html#path.Path.abspath">[docs]</a>    <span class="k">def</span> <span class="nf">abspath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.abspath` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="Path.normcase"><a class="viewcode-back" href="../measures.html#path.Path.normcase">[docs]</a>    <span class="k">def</span> <span class="nf">normcase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.normcase` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">normcase</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="Path.normpath"><a class="viewcode-back" href="../measures.html#path.Path.normpath">[docs]</a>    <span class="k">def</span> <span class="nf">normpath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.normpath` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="Path.realpath"><a class="viewcode-back" href="../measures.html#path.Path.realpath">[docs]</a>    <span class="k">def</span> <span class="nf">realpath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.realpath` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="Path.expanduser"><a class="viewcode-back" href="../measures.html#path.Path.expanduser">[docs]</a>    <span class="k">def</span> <span class="nf">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.expanduser` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="Path.expandvars"><a class="viewcode-back" href="../measures.html#path.Path.expandvars">[docs]</a>    <span class="k">def</span> <span class="nf">expandvars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.expandvars` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">expandvars</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="Path.dirname"><a class="viewcode-back" href="../measures.html#path.Path.dirname">[docs]</a>    <span class="k">def</span> <span class="nf">dirname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :attr:`parent`, :func:`os.path.dirname` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="Path.basename"><a class="viewcode-back" href="../measures.html#path.Path.basename">[docs]</a>    <span class="k">def</span> <span class="nf">basename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :attr:`name`, :func:`os.path.basename` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="Path.expand"><a class="viewcode-back" href="../measures.html#path.Path.expand">[docs]</a>    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Clean up a filename by calling :meth:`expandvars()`,</span>
<span class="sd">        :meth:`expanduser()`, and :meth:`normpath()` on it.</span>

<span class="sd">        This is commonly everything needed to clean up a filename</span>
<span class="sd">        read from a configuration file, for example.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">expandvars</span><span class="p">()</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span><span class="o">.</span><span class="n">normpath</span><span class="p">()</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">namebase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; The same as :meth:`name`, but with one file extension stripped off.</span>

<span class="sd">        For example,</span>
<span class="sd">        ``Path(&#39;/home/guido/python.tar.gz&#39;).name == &#39;python.tar.gz&#39;``,</span>
<span class="sd">        but</span>
<span class="sd">        ``Path(&#39;/home/guido/python.tar.gz&#39;).namebase == &#39;python.tar&#39;``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">base</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; The file extension, for example ``&#39;.py&#39;``. &quot;&quot;&quot;</span>
        <span class="n">f</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ext</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">drive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; The drive specifier, for example ``&#39;C:&#39;``.</span>

<span class="sd">        This is always empty on systems that don&#39;t use drive specifiers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">drive</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">splitdrive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">drive</span><span class="p">)</span>

    <span class="n">parent</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">dirname</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span>
        <span class="sd">&quot;&quot;&quot; This path&#39;s parent directory, as a new Path object.</span>

<span class="sd">        For example,</span>
<span class="sd">        ``Path(&#39;/usr/local/lib/libpython.so&#39;).parent ==</span>
<span class="sd">        Path(&#39;/usr/local/lib&#39;)``</span>

<span class="sd">        .. seealso:: :meth:`dirname`, :func:`os.path.dirname`</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">basename</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span>
        <span class="sd">&quot;&quot;&quot; The name of this file or directory without the full path.</span>

<span class="sd">        For example,</span>
<span class="sd">        ``Path(&#39;/usr/local/lib/libpython.so&#39;).name == &#39;libpython.so&#39;``</span>

<span class="sd">        .. seealso:: :meth:`basename`, :func:`os.path.basename`</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Path.splitpath"><a class="viewcode-back" href="../measures.html#path.Path.splitpath">[docs]</a>    <span class="k">def</span> <span class="nf">splitpath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; p.splitpath() -&gt; Return ``(p.parent, p.name)``.</span>

<span class="sd">        .. seealso:: :attr:`parent`, :attr:`name`, :func:`os.path.split`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parent</span><span class="p">,</span> <span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">parent</span><span class="p">),</span> <span class="n">child</span></div>

<div class="viewcode-block" id="Path.splitdrive"><a class="viewcode-back" href="../measures.html#path.Path.splitdrive">[docs]</a>    <span class="k">def</span> <span class="nf">splitdrive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; p.splitdrive() -&gt; Return ``(p.drive, &lt;the rest of p&gt;)``.</span>

<span class="sd">        Split the drive specifier from this path.  If there is</span>
<span class="sd">        no drive specifier, :samp:`{p.drive}` is empty, so the return value</span>
<span class="sd">        is simply ``(Path(&#39;&#39;), p)``.  This is always the case on Unix.</span>

<span class="sd">        .. seealso:: :func:`os.path.splitdrive`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">drive</span><span class="p">,</span> <span class="n">rel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">splitdrive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">drive</span><span class="p">),</span> <span class="n">rel</span></div>

<div class="viewcode-block" id="Path.splitext"><a class="viewcode-back" href="../measures.html#path.Path.splitext">[docs]</a>    <span class="k">def</span> <span class="nf">splitext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; p.splitext() -&gt; Return ``(p.stripext(), p.ext)``.</span>

<span class="sd">        Split the filename extension from this path and return</span>
<span class="sd">        the two parts.  Either part may be empty.</span>

<span class="sd">        The extension is everything from ``&#39;.&#39;`` to the end of the</span>
<span class="sd">        last path segment.  This has the property that if</span>
<span class="sd">        ``(a, b) == p.splitext()``, then ``a + b == p``.</span>

<span class="sd">        .. seealso:: :func:`os.path.splitext`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">filename</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="n">ext</span></div>

<div class="viewcode-block" id="Path.stripext"><a class="viewcode-back" href="../measures.html#path.Path.stripext">[docs]</a>    <span class="k">def</span> <span class="nf">stripext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; p.stripext() -&gt; Remove one file extension from the path.</span>

<span class="sd">        For example, ``Path(&#39;/home/guido/python.tar.gz&#39;).stripext()``</span>
<span class="sd">        returns ``Path(&#39;/home/guido/python.tar&#39;)``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">splitext</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Path.splitunc"><a class="viewcode-back" href="../measures.html#path.Path.splitunc">[docs]</a>    <span class="k">def</span> <span class="nf">splitunc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.splitunc` &quot;&quot;&quot;</span>
        <span class="n">unc</span><span class="p">,</span> <span class="n">rest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">splitunc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">unc</span><span class="p">),</span> <span class="n">rest</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">uncshare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The UNC mount point for this path.</span>
<span class="sd">        This is empty for paths on local drives.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">unc</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">splitunc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">unc</span><span class="p">)</span>

    <span class="nd">@multimethod</span>
    <span class="k">def</span> <span class="nf">joinpath</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Join first to zero or more :class:`Path` components, adding a separator</span>
<span class="sd">        character (:samp:`{first}.module.sep`) if needed.  Returns a new instance of</span>
<span class="sd">        :samp:`{first}._next_class`.</span>

<span class="sd">        .. seealso:: :func:`os.path.join`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">cls</span><span class="p">):</span>
            <span class="n">first</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">first</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">first</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">))</span>

<div class="viewcode-block" id="Path.splitall"><a class="viewcode-back" href="../measures.html#path.Path.splitall">[docs]</a>    <span class="k">def</span> <span class="nf">splitall</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot; Return a list of the path components in this path.</span>

<span class="sd">        The first item in the list will be a Path.  Its value will be</span>
<span class="sd">        either :data:`os.curdir`, :data:`os.pardir`, empty, or the root</span>
<span class="sd">        directory of this path (for example, ``&#39;/&#39;`` or ``&#39;C:\\&#39;``).  The</span>
<span class="sd">        other items in the list will be strings.</span>

<span class="sd">        ``path.Path.joinpath(*result)`` will yield the original path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">while</span> <span class="n">loc</span> <span class="o">!=</span> <span class="n">os</span><span class="o">.</span><span class="n">curdir</span> <span class="ow">and</span> <span class="n">loc</span> <span class="o">!=</span> <span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">:</span>
            <span class="n">prev</span> <span class="o">=</span> <span class="n">loc</span>
            <span class="n">loc</span><span class="p">,</span> <span class="n">child</span> <span class="o">=</span> <span class="n">prev</span><span class="o">.</span><span class="n">splitpath</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">loc</span> <span class="o">==</span> <span class="n">prev</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span>
        <span class="n">parts</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">parts</span></div>

<div class="viewcode-block" id="Path.relpath"><a class="viewcode-back" href="../measures.html#path.Path.relpath">[docs]</a>    <span class="k">def</span> <span class="nf">relpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s">&#39;.&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return this path as a relative path,</span>
<span class="sd">        based from `start`, which defaults to the current working directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cwd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cwd</span><span class="o">.</span><span class="n">relpathto</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.relpathto"><a class="viewcode-back" href="../measures.html#path.Path.relpathto">[docs]</a>    <span class="k">def</span> <span class="nf">relpathto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return a relative path from `self` to `dest`.</span>

<span class="sd">        If there is no relative path from `self` to `dest`, for example if</span>
<span class="sd">        they reside on different drives in Windows, then this returns</span>
<span class="sd">        ``dest.abspath()``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">abspath</span><span class="p">()</span>
        <span class="n">dest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">dest</span><span class="p">)</span><span class="o">.</span><span class="n">abspath</span><span class="p">()</span>

        <span class="n">orig_list</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">normcase</span><span class="p">()</span><span class="o">.</span><span class="n">splitall</span><span class="p">()</span>
        <span class="c"># Don&#39;t normcase dest!  We want to preserve the case.</span>
        <span class="n">dest_list</span> <span class="o">=</span> <span class="n">dest</span><span class="o">.</span><span class="n">splitall</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">orig_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">normcase</span><span class="p">(</span><span class="n">dest_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="c"># Can&#39;t get here from there.</span>
            <span class="k">return</span> <span class="n">dest</span>

        <span class="c"># Find the location where the two paths start to differ.</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">start_seg</span><span class="p">,</span> <span class="n">dest_seg</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">orig_list</span><span class="p">,</span> <span class="n">dest_list</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">start_seg</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">normcase</span><span class="p">(</span><span class="n">dest_seg</span><span class="p">):</span>
                <span class="k">break</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c"># Now i is the point where the two paths diverge.</span>
        <span class="c"># Need a certain number of &quot;os.pardir&quot;s to work up</span>
        <span class="c"># from the origin to the point of divergence.</span>
        <span class="n">segments</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">orig_list</span><span class="p">)</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span>
        <span class="c"># Need to add the diverging part of dest_list.</span>
        <span class="n">segments</span> <span class="o">+=</span> <span class="n">dest_list</span><span class="p">[</span><span class="n">i</span><span class="p">:]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c"># If they happen to be identical, use os.curdir.</span>
            <span class="n">relpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">curdir</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">relpath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">*</span><span class="n">segments</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">relpath</span><span class="p">)</span></div>

    <span class="c"># --- Listing, searching, walking, and matching</span>

<div class="viewcode-block" id="Path.listdir"><a class="viewcode-back" href="../measures.html#path.Path.listdir">[docs]</a>    <span class="k">def</span> <span class="nf">listdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; D.listdir() -&gt; List of items in this directory.</span>

<span class="sd">        Use :meth:`files` or :meth:`dirs` instead if you want a listing</span>
<span class="sd">        of just files or just subdirectories.</span>

<span class="sd">        The elements of the list are Path objects.</span>

<span class="sd">        With the optional `pattern` argument, this only lists</span>
<span class="sd">        items whose names match the given pattern.</span>

<span class="sd">        .. seealso:: :meth:`files`, :meth:`dirs`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">pattern</span> <span class="ow">is</span> <span class="k">None</span><span class="p">:</span>
            <span class="n">pattern</span> <span class="o">=</span> <span class="s">&#39;*&#39;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span> <span class="o">/</span> <span class="n">child</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_always_unicode</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">child</span><span class="p">)</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
        <span class="p">]</span></div>

<div class="viewcode-block" id="Path.dirs"><a class="viewcode-back" href="../measures.html#path.Path.dirs">[docs]</a>    <span class="k">def</span> <span class="nf">dirs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; D.dirs() -&gt; List of this directory&#39;s subdirectories.</span>

<span class="sd">        The elements of the list are Path objects.</span>
<span class="sd">        This does not walk recursively into subdirectories</span>
<span class="sd">        (but see :meth:`walkdirs`).</span>

<span class="sd">        With the optional `pattern` argument, this only lists</span>
<span class="sd">        directories whose names match the given pattern.  For</span>
<span class="sd">        example, ``d.dirs(&#39;build-*&#39;)``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span> <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">isdir</span><span class="p">()]</span></div>

<div class="viewcode-block" id="Path.files"><a class="viewcode-back" href="../measures.html#path.Path.files">[docs]</a>    <span class="k">def</span> <span class="nf">files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; D.files() -&gt; List of the files in this directory.</span>

<span class="sd">        The elements of the list are Path objects.</span>
<span class="sd">        This does not walk into subdirectories (see :meth:`walkfiles`).</span>

<span class="sd">        With the optional `pattern` argument, this only lists files</span>
<span class="sd">        whose names match the given pattern.  For example,</span>
<span class="sd">        ``d.files(&#39;*.pyc&#39;)``.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span> <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">isfile</span><span class="p">()]</span></div>

<div class="viewcode-block" id="Path.walk"><a class="viewcode-back" href="../measures.html#path.Path.walk">[docs]</a>    <span class="k">def</span> <span class="nf">walk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;strict&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; D.walk() -&gt; iterator over files and subdirs, recursively.</span>

<span class="sd">        The iterator yields Path objects naming each child item of</span>
<span class="sd">        this directory and its descendants.  This requires that</span>
<span class="sd">        ``D.isdir()``.</span>

<span class="sd">        This performs a depth-first traversal of the directory tree.</span>
<span class="sd">        Each directory is returned just before all its children.</span>

<span class="sd">        The `errors=` keyword argument controls behavior when an</span>
<span class="sd">        error occurs.  The default is ``&#39;strict&#39;``, which causes an</span>
<span class="sd">        exception.  Other allowed values are ``&#39;warn&#39;`` (which</span>
<span class="sd">        reports the error via :func:`warnings.warn()`), and ``&#39;ignore&#39;``.</span>
<span class="sd">        `errors` may also be an arbitrary callable taking a msg parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">class</span> <span class="nc">Handlers</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">strict</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
                <span class="k">raise</span>

            <span class="k">def</span> <span class="nf">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">TreeWalkWarning</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">ignore</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
                <span class="k">pass</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="ow">and</span> <span class="n">errors</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="n">Handlers</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;invalid errors parameter&quot;</span><span class="p">)</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="n">Handlers</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">errors</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">childList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">exc</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">tmpl</span> <span class="o">=</span> <span class="s">&quot;Unable to list directory &#39;%(self)s&#39;: %(exc)s&quot;</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">tmpl</span> <span class="o">%</span> <span class="nb">locals</span><span class="p">()</span>
            <span class="n">errors</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">childList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pattern</span> <span class="ow">is</span> <span class="k">None</span> <span class="ow">or</span> <span class="n">child</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">pattern</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">child</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">isdir</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">isdir</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">exc</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">tmpl</span> <span class="o">=</span> <span class="s">&quot;Unable to access &#39;%(child)s&#39;: %(exc)s&quot;</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">tmpl</span> <span class="o">%</span> <span class="nb">locals</span><span class="p">()</span>
                <span class="n">errors</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">isdir</span> <span class="o">=</span> <span class="k">False</span>

            <span class="k">if</span> <span class="n">isdir</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">child</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">item</span></div>

<div class="viewcode-block" id="Path.walkdirs"><a class="viewcode-back" href="../measures.html#path.Path.walkdirs">[docs]</a>    <span class="k">def</span> <span class="nf">walkdirs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;strict&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; D.walkdirs() -&gt; iterator over subdirs, recursively.</span>

<span class="sd">        With the optional `pattern` argument, this yields only</span>
<span class="sd">        directories whose names match the given pattern.  For</span>
<span class="sd">        example, ``mydir.walkdirs(&#39;*test&#39;)`` yields only directories</span>
<span class="sd">        with names ending in ``&#39;test&#39;``.</span>

<span class="sd">        The `errors=` keyword argument controls behavior when an</span>
<span class="sd">        error occurs.  The default is ``&#39;strict&#39;``, which causes an</span>
<span class="sd">        exception.  The other allowed values are ``&#39;warn&#39;`` (which</span>
<span class="sd">        reports the error via :func:`warnings.warn()`), and ``&#39;ignore&#39;``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">errors</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;strict&#39;</span><span class="p">,</span> <span class="s">&#39;warn&#39;</span><span class="p">,</span> <span class="s">&#39;ignore&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;invalid errors parameter&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">dirs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirs</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">errors</span> <span class="o">==</span> <span class="s">&#39;ignore&#39;</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">elif</span> <span class="n">errors</span> <span class="o">==</span> <span class="s">&#39;warn&#39;</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s">&quot;Unable to list directory &#39;%s&#39;: %s&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]),</span>
                    <span class="n">TreeWalkWarning</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span>

        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pattern</span> <span class="ow">is</span> <span class="k">None</span> <span class="ow">or</span> <span class="n">child</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">pattern</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">child</span>
            <span class="k">for</span> <span class="n">subsubdir</span> <span class="ow">in</span> <span class="n">child</span><span class="o">.</span><span class="n">walkdirs</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">subsubdir</span></div>

<div class="viewcode-block" id="Path.walkfiles"><a class="viewcode-back" href="../measures.html#path.Path.walkfiles">[docs]</a>    <span class="k">def</span> <span class="nf">walkfiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;strict&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; D.walkfiles() -&gt; iterator over files in D, recursively.</span>

<span class="sd">        The optional argument `pattern` limits the results to files</span>
<span class="sd">        with names that match the pattern.  For example,</span>
<span class="sd">        ``mydir.walkfiles(&#39;*.tmp&#39;)`` yields only files with the ``.tmp``</span>
<span class="sd">        extension.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">errors</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;strict&#39;</span><span class="p">,</span> <span class="s">&#39;warn&#39;</span><span class="p">,</span> <span class="s">&#39;ignore&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;invalid errors parameter&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">childList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">errors</span> <span class="o">==</span> <span class="s">&#39;ignore&#39;</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">elif</span> <span class="n">errors</span> <span class="o">==</span> <span class="s">&#39;warn&#39;</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s">&quot;Unable to list directory &#39;%s&#39;: %s&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]),</span>
                    <span class="n">TreeWalkWarning</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span>

        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">childList</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">isfile</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">isfile</span><span class="p">()</span>
                <span class="n">isdir</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">isfile</span> <span class="ow">and</span> <span class="n">child</span><span class="o">.</span><span class="n">isdir</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">errors</span> <span class="o">==</span> <span class="s">&#39;ignore&#39;</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">elif</span> <span class="n">errors</span> <span class="o">==</span> <span class="s">&#39;warn&#39;</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                        <span class="s">&quot;Unable to access &#39;%s&#39;: %s&quot;</span>
                        <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]),</span>
                        <span class="n">TreeWalkWarning</span><span class="p">)</span>
                    <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span>

            <span class="k">if</span> <span class="n">isfile</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">pattern</span> <span class="ow">is</span> <span class="k">None</span> <span class="ow">or</span> <span class="n">child</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">pattern</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">child</span>
            <span class="k">elif</span> <span class="n">isdir</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">child</span><span class="o">.</span><span class="n">walkfiles</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">f</span></div>

<div class="viewcode-block" id="Path.fnmatch"><a class="viewcode-back" href="../measures.html#path.Path.fnmatch">[docs]</a>    <span class="k">def</span> <span class="nf">fnmatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">normcase</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return ``True`` if `self.name` matches the given `pattern`.</span>

<span class="sd">        `pattern` - A filename pattern with wildcards,</span>
<span class="sd">            for example ``&#39;*.py&#39;``. If the pattern contains a `normcase`</span>
<span class="sd">            attribute, it is applied to the name and path prior to comparison.</span>

<span class="sd">        `normcase` - (optional) A function used to normalize the pattern and</span>
<span class="sd">            filename before matching. Defaults to :meth:`self.module`, which defaults</span>
<span class="sd">            to :meth:`os.path.normcase`.</span>

<span class="sd">        .. seealso:: :func:`fnmatch.fnmatch`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">default_normcase</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="s">&#39;normcase&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">normcase</span><span class="p">)</span>
        <span class="n">normcase</span> <span class="o">=</span> <span class="n">normcase</span> <span class="ow">or</span> <span class="n">default_normcase</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">normcase</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="n">normcase</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">fnmatchcase</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.glob"><a class="viewcode-back" href="../measures.html#path.Path.glob">[docs]</a>    <span class="k">def</span> <span class="nf">glob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return a list of Path objects that match the pattern.</span>

<span class="sd">        `pattern` - a path relative to this directory, with wildcards.</span>

<span class="sd">        For example, ``Path(&#39;/users&#39;).glob(&#39;*/bin/*&#39;)`` returns a list</span>
<span class="sd">        of all the files users have in their :file:`bin` directories.</span>

<span class="sd">        .. seealso:: :func:`glob.glob`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">cls</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="bp">self</span> <span class="o">/</span> <span class="n">pattern</span><span class="p">)]</span></div>

    <span class="c">#</span>
    <span class="c"># --- Reading or writing an entire file at once.</span>

<div class="viewcode-block" id="Path.open"><a class="viewcode-back" href="../measures.html#path.Path.open">[docs]</a>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Open this file and return a corresponding :class:`file` object.</span>

<span class="sd">        Keyword arguments work as in :func:`io.open`.  If the file cannot be</span>
<span class="sd">        opened, an :class:`~exceptions.OSError` is raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">io_error_compat</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.bytes"><a class="viewcode-back" href="../measures.html#path.Path.bytes">[docs]</a>    <span class="k">def</span> <span class="nf">bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Open this file, read all bytes, return them as a string. &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span></div>

<div class="viewcode-block" id="Path.chunks"><a class="viewcode-back" href="../measures.html#path.Path.chunks">[docs]</a>    <span class="k">def</span> <span class="nf">chunks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a generator yielding chunks of the file, so it can</span>
<span class="sd">            be read piece by piece with a simple for loop.</span>

<span class="sd">           Any argument you pass after `size` will be passed to :meth:`open`.</span>

<span class="sd">           :example:</span>

<span class="sd">               &gt;&gt;&gt; hash = hashlib.md5()</span>
<span class="sd">               &gt;&gt;&gt; for chunk in Path(&quot;path.py&quot;).chunks(8192, mode=&#39;rb&#39;):</span>
<span class="sd">               ...     hash.update(chunk)</span>

<span class="sd">            This will read the file by chunks of 8192 bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="ow">or</span> <span class="k">None</span><span class="p">,</span> <span class="k">None</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">chunk</span></div>

<div class="viewcode-block" id="Path.write_bytes"><a class="viewcode-back" href="../measures.html#path.Path.write_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">write_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="k">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Open this file and write the given bytes to it.</span>

<span class="sd">        Default behavior is to overwrite any existing file.</span>
<span class="sd">        Call ``p.write_bytes(bytes, append=True)`` to append instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">append</span><span class="p">:</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="s">&#39;ab&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="s">&#39;wb&#39;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytes</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.text"><a class="viewcode-back" href="../measures.html#path.Path.text">[docs]</a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;strict&#39;</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot; Open this file, read it in, return the content as a string.</span>

<span class="sd">        All newline sequences are converted to ``&#39;\n&#39;``.  Keyword arguments</span>
<span class="sd">        will be passed to :meth:`open`.</span>

<span class="sd">        .. seealso:: :meth:`lines`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="n">errors</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">U_NEWLINE</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span></div>

<div class="viewcode-block" id="Path.write_text"><a class="viewcode-back" href="../measures.html#path.Path.write_text">[docs]</a>    <span class="k">def</span> <span class="nf">write_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;strict&#39;</span><span class="p">,</span>
                   <span class="n">linesep</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="k">False</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot; Write the given text to this file.</span>

<span class="sd">        The default behavior is to overwrite any existing file;</span>
<span class="sd">        to append instead, use the `append=True` keyword argument.</span>

<span class="sd">        There are two differences between :meth:`write_text` and</span>
<span class="sd">        :meth:`write_bytes`: newline handling and Unicode handling.</span>
<span class="sd">        See below.</span>

<span class="sd">        Parameters:</span>

<span class="sd">          `text` - str/unicode - The text to be written.</span>

<span class="sd">          `encoding` - str - The Unicode encoding that will be used.</span>
<span class="sd">              This is ignored if `text` isn&#39;t a Unicode string.</span>

<span class="sd">          `errors` - str - How to handle Unicode encoding errors.</span>
<span class="sd">              Default is ``&#39;strict&#39;``.  See ``help(unicode.encode)`` for the</span>
<span class="sd">              options.  This is ignored if `text` isn&#39;t a Unicode</span>
<span class="sd">              string.</span>

<span class="sd">          `linesep` - keyword argument - str/unicode - The sequence of</span>
<span class="sd">              characters to be used to mark end-of-line.  The default is</span>
<span class="sd">              :data:`os.linesep`.  You can also specify ``None`` to</span>
<span class="sd">              leave all newlines as they are in `text`.</span>

<span class="sd">          `append` - keyword argument - bool - Specifies what to do if</span>
<span class="sd">              the file already exists (``True``: append to the end of it;</span>
<span class="sd">              ``False``: overwrite it.)  The default is ``False``.</span>


<span class="sd">        --- Newline handling.</span>

<span class="sd">        ``write_text()`` converts all standard end-of-line sequences</span>
<span class="sd">        (``&#39;\n&#39;``, ``&#39;\r&#39;``, and ``&#39;\r\n&#39;``) to your platform&#39;s default</span>
<span class="sd">        end-of-line sequence (see :data:`os.linesep`; on Windows, for example,</span>
<span class="sd">        the end-of-line marker is ``&#39;\r\n&#39;``).</span>

<span class="sd">        If you don&#39;t like your platform&#39;s default, you can override it</span>
<span class="sd">        using the `linesep=` keyword argument.  If you specifically want</span>
<span class="sd">        ``write_text()`` to preserve the newlines as-is, use ``linesep=None``.</span>

<span class="sd">        This applies to Unicode text the same as to 8-bit text, except</span>
<span class="sd">        there are three additional standard Unicode end-of-line sequences:</span>
<span class="sd">        ``u&#39;\x85&#39;``, ``u&#39;\r\x85&#39;``, and ``u&#39;\u2028&#39;``.</span>

<span class="sd">        (This is slightly different from when you open a file for</span>
<span class="sd">        writing with ``fopen(filename, &quot;w&quot;)`` in C or ``open(filename, &#39;w&#39;)``</span>
<span class="sd">        in Python.)</span>


<span class="sd">        --- Unicode</span>

<span class="sd">        If `text` isn&#39;t Unicode, then apart from newline handling, the</span>
<span class="sd">        bytes are written verbatim to the file.  The `encoding` and</span>
<span class="sd">        `errors` arguments are not used and must be omitted.</span>

<span class="sd">        If `text` is Unicode, it is first converted to :func:`bytes` using the</span>
<span class="sd">        specified `encoding` (or the default encoding if `encoding`</span>
<span class="sd">        isn&#39;t specified).  The `errors` argument applies only to this</span>
<span class="sd">        conversion.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">text_type</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">linesep</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">U_NEWLINE</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">linesep</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span> <span class="ow">or</span> <span class="n">sys</span><span class="o">.</span><span class="n">getdefaultencoding</span><span class="p">(),</span> <span class="n">errors</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="k">None</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">NEWLINE</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">linesep</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">append</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.lines"><a class="viewcode-back" href="../measures.html#path.Path.lines">[docs]</a>    <span class="k">def</span> <span class="nf">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;strict&#39;</span><span class="p">,</span> <span class="n">retain</span><span class="o">=</span><span class="k">True</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot; Open this file, read all lines, return them in a list.</span>

<span class="sd">        Optional arguments:</span>
<span class="sd">            `encoding` - The Unicode encoding (or character set) of</span>
<span class="sd">                the file.  The default is ``None``, meaning the content</span>
<span class="sd">                of the file is read as 8-bit characters and returned</span>
<span class="sd">                as a list of (non-Unicode) str objects.</span>
<span class="sd">            `errors` - How to handle Unicode errors; see help(str.decode)</span>
<span class="sd">                for the options.  Default is ``&#39;strict&#39;``.</span>
<span class="sd">            `retain` - If ``True``, retain newline characters; but all newline</span>
<span class="sd">                character combinations (``&#39;\r&#39;``, ``&#39;\n&#39;``, ``&#39;\r\n&#39;``) are</span>
<span class="sd">                translated to ``&#39;\n&#39;``.  If ``False``, newline characters are</span>
<span class="sd">                stripped off.  Default is ``True``.</span>

<span class="sd">        This uses ``&#39;U&#39;`` mode.</span>

<span class="sd">        .. seealso:: :meth:`text`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="k">None</span> <span class="ow">and</span> <span class="n">retain</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;U&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="n">retain</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.write_lines"><a class="viewcode-back" href="../measures.html#path.Path.write_lines">[docs]</a>    <span class="k">def</span> <span class="nf">write_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;strict&#39;</span><span class="p">,</span>
                    <span class="n">linesep</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="k">False</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot; Write the given lines of text to this file.</span>

<span class="sd">        By default this overwrites any existing file at this path.</span>

<span class="sd">        This puts a platform-specific newline sequence on every line.</span>
<span class="sd">        See `linesep` below.</span>

<span class="sd">            `lines` - A list of strings.</span>

<span class="sd">            `encoding` - A Unicode encoding to use.  This applies only if</span>
<span class="sd">                `lines` contains any Unicode strings.</span>

<span class="sd">            `errors` - How to handle errors in Unicode encoding.  This</span>
<span class="sd">                also applies only to Unicode strings.</span>

<span class="sd">            linesep - The desired line-ending.  This line-ending is</span>
<span class="sd">                applied to every line.  If a line already has any</span>
<span class="sd">                standard line ending (``&#39;\r&#39;``, ``&#39;\n&#39;``, ``&#39;\r\n&#39;``,</span>
<span class="sd">                ``u&#39;\x85&#39;``, ``u&#39;\r\x85&#39;``, ``u&#39;\u2028&#39;``), that will</span>
<span class="sd">                be stripped off and this will be used instead.  The</span>
<span class="sd">                default is os.linesep, which is platform-dependent</span>
<span class="sd">                (``&#39;\r\n&#39;`` on Windows, ``&#39;\n&#39;`` on Unix, etc.).</span>
<span class="sd">                Specify ``None`` to write the lines as-is, like</span>
<span class="sd">                :meth:`file.writelines`.</span>

<span class="sd">        Use the keyword argument ``append=True`` to append lines to the</span>
<span class="sd">        file.  The default is to overwrite the file.</span>

<span class="sd">        .. warning ::</span>

<span class="sd">            When you use this with Unicode data, if the encoding of the</span>
<span class="sd">            existing data in the file is different from the encoding</span>
<span class="sd">            you specify with the `encoding=` parameter, the result is</span>
<span class="sd">            mixed-encoding data, which can really confuse someone trying</span>
<span class="sd">            to read the file later.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;ab&#39;</span> <span class="k">if</span> <span class="n">append</span> <span class="k">else</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
                <span class="n">isUnicode</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">text_type</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">linesep</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
                    <span class="n">pattern</span> <span class="o">=</span> <span class="n">U_NL_END</span> <span class="k">if</span> <span class="n">isUnicode</span> <span class="k">else</span> <span class="n">NL_END</span>
                    <span class="n">l</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="o">+</span> <span class="n">linesep</span>
                <span class="k">if</span> <span class="n">isUnicode</span><span class="p">:</span>
                    <span class="n">l</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span> <span class="ow">or</span> <span class="n">sys</span><span class="o">.</span><span class="n">getdefaultencoding</span><span class="p">(),</span> <span class="n">errors</span><span class="p">)</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">l</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.read_md5"><a class="viewcode-back" href="../measures.html#path.Path.read_md5">[docs]</a>    <span class="k">def</span> <span class="nf">read_md5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Calculate the md5 hash for this file.</span>

<span class="sd">        This reads through the entire file.</span>

<span class="sd">        .. seealso:: :meth:`read_hash`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_hash</span><span class="p">(</span><span class="s">&#39;md5&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hash_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a hash object for the file at the current path.</span>

<span class="sd">            `hash_name` should be a hash algo name (such as ``&#39;md5&#39;`` or ``&#39;sha1&#39;``)</span>
<span class="sd">            that&#39;s available in the :mod:`hashlib` module.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">hash_name</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chunks</span><span class="p">(</span><span class="mi">8192</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&quot;rb&quot;</span><span class="p">):</span>
            <span class="n">m</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>

<div class="viewcode-block" id="Path.read_hash"><a class="viewcode-back" href="../measures.html#path.Path.read_hash">[docs]</a>    <span class="k">def</span> <span class="nf">read_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hash_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Calculate given hash for this file.</span>

<span class="sd">        List of supported hashes can be obtained from :mod:`hashlib` package.</span>
<span class="sd">        This reads the entire file.</span>

<span class="sd">        .. seealso:: :meth:`hashlib.hash.digest`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash</span><span class="p">(</span><span class="n">hash_name</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span></div>

<div class="viewcode-block" id="Path.read_hexhash"><a class="viewcode-back" href="../measures.html#path.Path.read_hexhash">[docs]</a>    <span class="k">def</span> <span class="nf">read_hexhash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hash_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Calculate given hash for this file, returning hexdigest.</span>

<span class="sd">        List of supported hashes can be obtained from :mod:`hashlib` package.</span>
<span class="sd">        This reads the entire file.</span>

<span class="sd">        .. seealso:: :meth:`hashlib.hash.hexdigest`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash</span><span class="p">(</span><span class="n">hash_name</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span></div>

    <span class="c"># --- Methods for querying the filesystem.</span>
    <span class="c"># N.B. On some platforms, the os.path functions may be implemented in C</span>
    <span class="c"># (e.g. isdir on Windows, Python 3.2.2), and compiled functions don&#39;t get</span>
    <span class="c"># bound. Playing it safe and wrapping them all in method calls.</span>

<div class="viewcode-block" id="Path.isabs"><a class="viewcode-back" href="../measures.html#path.Path.isabs">[docs]</a>    <span class="k">def</span> <span class="nf">isabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.isabs` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.exists"><a class="viewcode-back" href="../measures.html#path.Path.exists">[docs]</a>    <span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.exists` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.isdir"><a class="viewcode-back" href="../measures.html#path.Path.isdir">[docs]</a>    <span class="k">def</span> <span class="nf">isdir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.isdir` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.isfile"><a class="viewcode-back" href="../measures.html#path.Path.isfile">[docs]</a>    <span class="k">def</span> <span class="nf">isfile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.isfile` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.islink"><a class="viewcode-back" href="../measures.html#path.Path.islink">[docs]</a>    <span class="k">def</span> <span class="nf">islink</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.islink` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.ismount"><a class="viewcode-back" href="../measures.html#path.Path.ismount">[docs]</a>    <span class="k">def</span> <span class="nf">ismount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.ismount` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">ismount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.samefile"><a class="viewcode-back" href="../measures.html#path.Path.samefile">[docs]</a>    <span class="k">def</span> <span class="nf">samefile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.path.samefile` &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">,</span> <span class="s">&#39;samefile&#39;</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">realpath</span><span class="p">()</span><span class="o">.</span><span class="n">normpath</span><span class="p">()</span><span class="o">.</span><span class="n">normcase</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">realpath</span><span class="p">()</span><span class="o">.</span><span class="n">normpath</span><span class="p">()</span><span class="o">.</span><span class="n">normcase</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">samefile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.getatime"><a class="viewcode-back" href="../measures.html#path.Path.getatime">[docs]</a>    <span class="k">def</span> <span class="nf">getatime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :attr:`atime`, :func:`os.path.getatime` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">getatime</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="n">atime</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">getatime</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span>
        <span class="sd">&quot;&quot;&quot; Last access time of the file.</span>

<span class="sd">        .. seealso:: :meth:`getatime`, :func:`os.path.getatime`</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Path.getmtime"><a class="viewcode-back" href="../measures.html#path.Path.getmtime">[docs]</a>    <span class="k">def</span> <span class="nf">getmtime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :attr:`mtime`, :func:`os.path.getmtime` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="n">mtime</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">getmtime</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span>
        <span class="sd">&quot;&quot;&quot; Last-modified time of the file.</span>

<span class="sd">        .. seealso:: :meth:`getmtime`, :func:`os.path.getmtime`</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Path.getctime"><a class="viewcode-back" href="../measures.html#path.Path.getctime">[docs]</a>    <span class="k">def</span> <span class="nf">getctime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :attr:`ctime`, :func:`os.path.getctime` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">getctime</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="n">ctime</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">getctime</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span>
        <span class="sd">&quot;&quot;&quot; Creation time of the file.</span>

<span class="sd">        .. seealso:: :meth:`getctime`, :func:`os.path.getctime`</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Path.getsize"><a class="viewcode-back" href="../measures.html#path.Path.getsize">[docs]</a>    <span class="k">def</span> <span class="nf">getsize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :attr:`size`, :func:`os.path.getsize` &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="n">size</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">getsize</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span>
        <span class="sd">&quot;&quot;&quot; Size of the file, in bytes.</span>

<span class="sd">        .. seealso:: :meth:`getsize`, :func:`os.path.getsize`</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s">&#39;access&#39;</span><span class="p">):</span>
<div class="viewcode-block" id="Path.access"><a class="viewcode-back" href="../measures.html#path.Path.access">[docs]</a>        <span class="k">def</span> <span class="nf">access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; Return ``True`` if current user has access to this path.</span>

<span class="sd">            mode - One of the constants :data:`os.F_OK`, :data:`os.R_OK`,</span>
<span class="sd">            :data:`os.W_OK`, :data:`os.X_OK`</span>

<span class="sd">            .. seealso:: :func:`os.access`</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.stat"><a class="viewcode-back" href="../measures.html#path.Path.stat">[docs]</a>    <span class="k">def</span> <span class="nf">stat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Perform a ``stat()`` system call on this path.</span>

<span class="sd">        .. seealso:: :meth:`lstat`, :func:`os.stat`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.lstat"><a class="viewcode-back" href="../measures.html#path.Path.lstat">[docs]</a>    <span class="k">def</span> <span class="nf">lstat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Like :meth:`stat`, but do not follow symbolic links.</span>

<span class="sd">        .. seealso:: :meth:`stat`, :func:`os.lstat`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">lstat</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__get_owner_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the name of the owner of this file or directory. Follow</span>
<span class="sd">        symbolic links.</span>

<span class="sd">        Return a name of the form ``r&#39;DOMAIN\\User Name&#39;``; may be a group.</span>

<span class="sd">        .. seealso:: :attr:`owner`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">win32security</span><span class="o">.</span><span class="n">GetFileSecurity</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">win32security</span><span class="o">.</span><span class="n">OWNER_SECURITY_INFORMATION</span><span class="p">)</span>
        <span class="n">sid</span> <span class="o">=</span> <span class="n">desc</span><span class="o">.</span><span class="n">GetSecurityDescriptorOwner</span><span class="p">()</span>
        <span class="n">account</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">typecode</span> <span class="o">=</span> <span class="n">win32security</span><span class="o">.</span><span class="n">LookupAccountSid</span><span class="p">(</span><span class="k">None</span><span class="p">,</span> <span class="n">sid</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">domain</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">account</span>

    <span class="k">def</span> <span class="nf">__get_owner_unix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the name of the owner of this file or directory. Follow</span>
<span class="sd">        symbolic links.</span>

<span class="sd">        .. seealso:: :attr:`owner`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">st</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pwd</span><span class="o">.</span><span class="n">getpwuid</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">st_uid</span><span class="p">)</span><span class="o">.</span><span class="n">pw_name</span>

    <span class="k">def</span> <span class="nf">__get_owner_not_implemented</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s">&quot;Ownership not available on this platform.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s">&#39;win32security&#39;</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">():</span>
        <span class="n">get_owner</span> <span class="o">=</span> <span class="n">__get_owner_windows</span>
    <span class="k">elif</span> <span class="s">&#39;pwd&#39;</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">():</span>
        <span class="n">get_owner</span> <span class="o">=</span> <span class="n">__get_owner_unix</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">get_owner</span> <span class="o">=</span> <span class="n">__get_owner_not_implemented</span>

    <span class="n">owner</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">get_owner</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span>
        <span class="sd">&quot;&quot;&quot; Name of the owner of this file or directory.</span>

<span class="sd">        .. seealso:: :meth:`get_owner`&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s">&#39;statvfs&#39;</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">statvfs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; Perform a ``statvfs()`` system call on this path.</span>

<span class="sd">            .. seealso:: :func:`os.statvfs`</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">statvfs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s">&#39;pathconf&#39;</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">pathconf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.pathconf` &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">pathconf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="c">#</span>
    <span class="c"># --- Modifying operations on files and directories</span>

<div class="viewcode-block" id="Path.utime"><a class="viewcode-back" href="../measures.html#path.Path.utime">[docs]</a>    <span class="k">def</span> <span class="nf">utime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the access and modified times of this file.</span>

<span class="sd">        .. seealso:: :func:`os.utime`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">utime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.chmod"><a class="viewcode-back" href="../measures.html#path.Path.chmod">[docs]</a>    <span class="k">def</span> <span class="nf">chmod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the mode. May be the new mode (os.chmod behavior) or a `symbolic</span>
<span class="sd">        mode &lt;http://en.wikipedia.org/wiki/Chmod#Symbolic_modes&gt;`_.</span>

<span class="sd">        .. seealso:: :func:`os.chmod`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">_multi_permission_mask</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="n">mask</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_mode</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.chown"><a class="viewcode-back" href="../measures.html#path.Path.chown">[docs]</a>    <span class="k">def</span> <span class="nf">chown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uid</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">gid</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change the owner and group by names rather than the uid or gid numbers.</span>

<span class="sd">        .. seealso:: :func:`os.chown`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s">&#39;chown&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="s">&#39;pwd&#39;</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
                <span class="n">uid</span> <span class="o">=</span> <span class="n">pwd</span><span class="o">.</span><span class="n">getpwnam</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span><span class="o">.</span><span class="n">pw_uid</span>
            <span class="k">if</span> <span class="s">&#39;grp&#39;</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gid</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
                <span class="n">gid</span> <span class="o">=</span> <span class="n">grp</span><span class="o">.</span><span class="n">getgrnam</span><span class="p">(</span><span class="n">gid</span><span class="p">)</span><span class="o">.</span><span class="n">gr_gid</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">gid</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s">&quot;Ownership not available on this platform.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.rename"><a class="viewcode-back" href="../measures.html#path.Path.rename">[docs]</a>    <span class="k">def</span> <span class="nf">rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.rename` &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">new</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.renames"><a class="viewcode-back" href="../measures.html#path.Path.renames">[docs]</a>    <span class="k">def</span> <span class="nf">renames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.renames` &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">renames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">new</span><span class="p">)</span></div>

    <span class="c">#</span>
    <span class="c"># --- Create/delete operations on directories</span>

<div class="viewcode-block" id="Path.mkdir"><a class="viewcode-back" href="../measures.html#path.Path.mkdir">[docs]</a>    <span class="k">def</span> <span class="nf">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mo">0o777</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.mkdir` &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.mkdir_p"><a class="viewcode-back" href="../measures.html#path.Path.mkdir_p">[docs]</a>    <span class="k">def</span> <span class="nf">mkdir_p</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mo">0o777</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Like :meth:`mkdir`, but does not raise an exception if the</span>
<span class="sd">        directory already exists. &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">errno</span><span class="o">.</span><span class="n">EEXIST</span><span class="p">:</span>
                <span class="k">raise</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.makedirs"><a class="viewcode-back" href="../measures.html#path.Path.makedirs">[docs]</a>    <span class="k">def</span> <span class="nf">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mo">0o777</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.makedirs` &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.makedirs_p"><a class="viewcode-back" href="../measures.html#path.Path.makedirs_p">[docs]</a>    <span class="k">def</span> <span class="nf">makedirs_p</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mo">0o777</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Like :meth:`makedirs`, but does not raise an exception if the</span>
<span class="sd">        directory already exists. &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">errno</span><span class="o">.</span><span class="n">EEXIST</span><span class="p">:</span>
                <span class="k">raise</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.rmdir"><a class="viewcode-back" href="../measures.html#path.Path.rmdir">[docs]</a>    <span class="k">def</span> <span class="nf">rmdir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.rmdir` &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.rmdir_p"><a class="viewcode-back" href="../measures.html#path.Path.rmdir_p">[docs]</a>    <span class="k">def</span> <span class="nf">rmdir_p</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Like :meth:`rmdir`, but does not raise an exception if the</span>
<span class="sd">        directory is not empty or does not exist. &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rmdir</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">errno</span><span class="o">.</span><span class="n">ENOTEMPTY</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">errno</span><span class="o">.</span><span class="n">EEXIST</span><span class="p">:</span>
                <span class="k">raise</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.removedirs"><a class="viewcode-back" href="../measures.html#path.Path.removedirs">[docs]</a>    <span class="k">def</span> <span class="nf">removedirs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.removedirs` &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">removedirs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.removedirs_p"><a class="viewcode-back" href="../measures.html#path.Path.removedirs_p">[docs]</a>    <span class="k">def</span> <span class="nf">removedirs_p</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Like :meth:`removedirs`, but does not raise an exception if the</span>
<span class="sd">        directory is not empty or does not exist. &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">removedirs</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">errno</span><span class="o">.</span><span class="n">ENOTEMPTY</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">errno</span><span class="o">.</span><span class="n">EEXIST</span><span class="p">:</span>
                <span class="k">raise</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="c"># --- Modifying operations on files</span>

<div class="viewcode-block" id="Path.touch"><a class="viewcode-back" href="../measures.html#path.Path.touch">[docs]</a>    <span class="k">def</span> <span class="nf">touch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the access/modified times of this file to the current time.</span>
<span class="sd">        Create the file if it does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">O_WRONLY</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">O_CREAT</span><span class="p">,</span> <span class="mo">0o666</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">utime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="k">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.remove"><a class="viewcode-back" href="../measures.html#path.Path.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.remove` &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.remove_p"><a class="viewcode-back" href="../measures.html#path.Path.remove_p">[docs]</a>    <span class="k">def</span> <span class="nf">remove_p</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Like :meth:`remove`, but does not raise an exception if the</span>
<span class="sd">        file does not exist. &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">errno</span><span class="o">.</span><span class="n">ENOENT</span><span class="p">:</span>
                <span class="k">raise</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.unlink"><a class="viewcode-back" href="../measures.html#path.Path.unlink">[docs]</a>    <span class="k">def</span> <span class="nf">unlink</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.unlink` &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.unlink_p"><a class="viewcode-back" href="../measures.html#path.Path.unlink_p">[docs]</a>    <span class="k">def</span> <span class="nf">unlink_p</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Like :meth:`unlink`, but does not raise an exception if the</span>
<span class="sd">        file does not exist. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_p</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="c"># --- Links</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s">&#39;link&#39;</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newpath</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; Create a hard link at `newpath`, pointing to this file.</span>

<span class="sd">            .. seealso:: :func:`os.link`</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">os</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newpath</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">newpath</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s">&#39;symlink&#39;</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">symlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newlink</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; Create a symbolic link at `newlink`, pointing here.</span>

<span class="sd">            .. seealso:: :func:`os.symlink`</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newlink</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">newlink</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s">&#39;readlink&#39;</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">readlink</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; Return the path to which this symbolic link points.</span>

<span class="sd">            The result may be an absolute or a relative path.</span>

<span class="sd">            .. seealso:: :meth:`readlinkabs`, :func:`os.readlink`</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">readlink</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">readlinkabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; Return the path to which this symbolic link points.</span>

<span class="sd">            The result is always an absolute path.</span>

<span class="sd">            .. seealso:: :meth:`readlink`, :func:`os.readlink`</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readlink</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">isabs</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">p</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">abspath</span><span class="p">()</span>

    <span class="c"># High-level functions from shutil</span>
    <span class="c"># These functions will be bound to the instance such that</span>
    <span class="c"># Path(name).copy(target) will invoke shutil.copy(name, target)</span>

    <span class="n">copyfile</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span>
    <span class="n">copymode</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">copymode</span>
    <span class="n">copystat</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">copystat</span>
    <span class="n">copy</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span>
    <span class="n">copy2</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span>
    <span class="n">copytree</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">copytree</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">shutil</span><span class="p">,</span> <span class="s">&#39;move&#39;</span><span class="p">):</span>
        <span class="n">move</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">move</span>
    <span class="n">rmtree</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span>

<div class="viewcode-block" id="Path.rmtree_p"><a class="viewcode-back" href="../measures.html#path.Path.rmtree_p">[docs]</a>    <span class="k">def</span> <span class="nf">rmtree_p</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Like :meth:`rmtree`, but does not raise an exception if the</span>
<span class="sd">        directory does not exist. &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">errno</span><span class="o">.</span><span class="n">ENOENT</span><span class="p">:</span>
                <span class="k">raise</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.chdir"><a class="viewcode-back" href="../measures.html#path.Path.chdir">[docs]</a>    <span class="k">def</span> <span class="nf">chdir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.chdir` &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="n">cd</span> <span class="o">=</span> <span class="n">chdir</span>

<div class="viewcode-block" id="Path.merge_tree"><a class="viewcode-back" href="../measures.html#path.Path.merge_tree">[docs]</a>    <span class="k">def</span> <span class="nf">merge_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="n">symlinks</span><span class="o">=</span><span class="k">False</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Copy entire contents of self to dst, overwriting existing</span>
<span class="sd">        contents in dst with those in self.</span>

<span class="sd">        If the additional keyword `update` is True, each</span>
<span class="sd">        `src` will only be copied if `dst` does not exist,</span>
<span class="sd">        or `src` is newer than `dst`.</span>

<span class="sd">        Note that the technique employed stages the files in a temporary</span>
<span class="sd">        directory first, so this function is not suitable for merging</span>
<span class="sd">        trees with large files, especially if the temporary directory</span>
<span class="sd">        is not capable of storing a copy of the entire source tree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">update</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">&#39;update&#39;</span><span class="p">,</span> <span class="k">False</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">tempdir</span><span class="p">()</span> <span class="k">as</span> <span class="n">_temp_dir</span><span class="p">:</span>
            <span class="c"># first copy the tree to a stage directory to support</span>
            <span class="c">#  the parameters and behavior of copytree.</span>
            <span class="n">stage</span> <span class="o">=</span> <span class="n">_temp_dir</span> <span class="o">/</span> <span class="nb">str</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">symlinks</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c"># now copy everything from the stage directory using</span>
            <span class="c">#  the semantics of dir_util.copy_tree</span>
            <span class="n">dir_util</span><span class="o">.</span><span class="n">copy_tree</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="n">preserve_symlinks</span><span class="o">=</span><span class="n">symlinks</span><span class="p">,</span>
                <span class="n">update</span><span class="o">=</span><span class="n">update</span><span class="p">)</span></div>

    <span class="c">#</span>
    <span class="c"># --- Special stuff from os</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s">&#39;chroot&#39;</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">chroot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.chroot` &quot;&quot;&quot;</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chroot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s">&#39;startfile&#39;</span><span class="p">):</span>
<div class="viewcode-block" id="Path.startfile"><a class="viewcode-back" href="../measures.html#path.Path.startfile">[docs]</a>        <span class="k">def</span> <span class="nf">startfile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; .. seealso:: :func:`os.startfile` &quot;&quot;&quot;</span>
            <span class="n">os</span><span class="o">.</span><span class="n">startfile</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span></div>

    <span class="c"># in-place re-writing, courtesy of Martijn Pieters</span>
    <span class="c"># http://www.zopatista.com/python/2013/11/26/inplace-file-rewriting/</span>
    <span class="nd">@contextlib</span><span class="o">.</span><span class="n">contextmanager</span>
<div class="viewcode-block" id="Path.in_place"><a class="viewcode-back" href="../measures.html#path.Path.in_place">[docs]</a>    <span class="k">def</span> <span class="nf">in_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">buffering</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="k">None</span><span class="p">,</span>
            <span class="n">newline</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">backup_extension</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A context in which a file may be re-written in-place with new content.</span>

<span class="sd">        Yields a tuple of :samp:`({readable}, {writable})` file objects, where `writable`</span>
<span class="sd">        replaces `readable`.</span>

<span class="sd">        If an exception occurs, the old file is restored, removing the</span>
<span class="sd">        written data.</span>

<span class="sd">        Mode *must not* use ``&#39;w&#39;``, ``&#39;a&#39;``, or ``&#39;+&#39;``; only read-only-modes are</span>
<span class="sd">        allowed. A :exc:`ValueError` is raised on invalid modes.</span>

<span class="sd">        For example, to add line numbers to a file::</span>

<span class="sd">            p = Path(filename)</span>
<span class="sd">            assert p.isfile()</span>
<span class="sd">            with p.in_place() as (reader, writer):</span>
<span class="sd">                for number, line in enumerate(reader, 1):</span>
<span class="sd">                    writer.write(&#39;{0:3}: &#39;.format(number)))</span>
<span class="sd">                    writer.write(line)</span>

<span class="sd">        Thereafter, the file at `filename` will have line numbers in it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">io</span>

        <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="s">&#39;wa+&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Only read-only file modes can be used&#39;</span><span class="p">)</span>

        <span class="c"># move existing file to backup, create new file with same permissions</span>
        <span class="c"># borrowed extensively from the fileinput module</span>
        <span class="n">backup_fn</span> <span class="o">=</span> <span class="bp">self</span> <span class="o">+</span> <span class="p">(</span><span class="n">backup_extension</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">extsep</span> <span class="o">+</span> <span class="s">&#39;bak&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">backup_fn</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">os</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">backup_fn</span><span class="p">)</span>
        <span class="n">readable</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">backup_fn</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">buffering</span><span class="o">=</span><span class="n">buffering</span><span class="p">,</span>
            <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="n">errors</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="n">newline</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">perm</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">fstat</span><span class="p">(</span><span class="n">readable</span><span class="o">.</span><span class="n">fileno</span><span class="p">())</span><span class="o">.</span><span class="n">st_mode</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="n">writable</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;w&#39;</span> <span class="o">+</span> <span class="n">mode</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span>
                <span class="n">buffering</span><span class="o">=</span><span class="n">buffering</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="n">errors</span><span class="p">,</span>
                <span class="n">newline</span><span class="o">=</span><span class="n">newline</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">os_mode</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">O_CREAT</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">O_WRONLY</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">O_TRUNC</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s">&#39;O_BINARY&#39;</span><span class="p">):</span>
                <span class="n">os_mode</span> <span class="o">|=</span> <span class="n">os</span><span class="o">.</span><span class="n">O_BINARY</span>
            <span class="n">fd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">os_mode</span><span class="p">,</span> <span class="n">perm</span><span class="p">)</span>
            <span class="n">writable</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="s">&quot;w&quot;</span> <span class="o">+</span> <span class="n">mode</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span>
                <span class="n">buffering</span><span class="o">=</span><span class="n">buffering</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="n">errors</span><span class="p">,</span>
                <span class="n">newline</span><span class="o">=</span><span class="n">newline</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s">&#39;chmod&#39;</span><span class="p">):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">perm</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">readable</span><span class="p">,</span> <span class="n">writable</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="c"># move backup back</span>
            <span class="n">readable</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">writable</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">os</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">backup_fn</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="k">raise</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">readable</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">writable</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">backup_fn</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">os</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
                <span class="k">pass</span></div>

    <span class="nd">@ClassProperty</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">special</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a SpecialResolver object suitable referencing a suitable</span>
<span class="sd">        directory for the relevant platform for the given</span>
<span class="sd">        type of content.</span>

<span class="sd">        For example, to get a user config directory, invoke:</span>

<span class="sd">            dir = Path.special().user.config</span>

<span class="sd">        Uses the `appdirs</span>
<span class="sd">        &lt;https://pypi.python.org/pypi/appdirs/1.4.0&gt;`_ to resolve</span>
<span class="sd">        the paths in a platform-friendly way.</span>

<span class="sd">        To create a config directory for &#39;My App&#39;, consider:</span>

<span class="sd">            dir = Path.special(&quot;My App&quot;).user.config.makedirs_p()</span>

<span class="sd">        If the ``appdirs`` module is not installed, invocation</span>
<span class="sd">        of special will raise an ImportError.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">SpecialResolver</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span></div>


<span class="k">class</span> <span class="nc">SpecialResolver</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">ResolverScope</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paths</span><span class="p">,</span> <span class="n">scope</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">paths</span> <span class="o">=</span> <span class="n">paths</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scope</span> <span class="o">=</span> <span class="n">scope</span>

        <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">class_</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">paths</span><span class="o">.</span><span class="n">get_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span> <span class="n">class_</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path_class</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">appdirs</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="s">&#39;appdirs&#39;</span><span class="p">)</span>

        <span class="c"># let appname default to None until</span>
        <span class="c"># https://github.com/ActiveState/appdirs/issues/55 is solved.</span>
        <span class="ow">not</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s">&#39;appname&#39;</span><span class="p">,</span> <span class="k">None</span><span class="p">)</span>

        <span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="n">path_class</span><span class="o">=</span><span class="n">path_class</span><span class="p">,</span>
            <span class="n">wrapper</span><span class="o">=</span><span class="n">appdirs</span><span class="o">.</span><span class="n">AppDirs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scope</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ResolverScope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scope</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">class_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the callable function from appdirs, but with the</span>
<span class="sd">        result wrapped in self.path_class</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop_name</span> <span class="o">=</span> <span class="s">&#39;{scope}_{class_}_dir&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">())</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wrapper</span><span class="p">,</span> <span class="n">prop_name</span><span class="p">)</span>
        <span class="n">MultiPath</span> <span class="o">=</span> <span class="n">Multi</span><span class="o">.</span><span class="n">for_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_class</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">MultiPath</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Multi</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A mix-in for a Path which may contain multiple Path separated by pathsep.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">for_class</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">path_cls</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;Multi&#39;</span> <span class="o">+</span> <span class="n">path_cls</span><span class="o">.</span><span class="n">__name__</span>
        <span class="k">if</span> <span class="n">PY2</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">path_cls</span><span class="p">),</span> <span class="p">{})</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">detect</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="nb">input</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">pathsep</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">:</span>
            <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_next_class</span>
        <span class="k">return</span> <span class="n">cls</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_next_class</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">pathsep</span><span class="p">)))</span>

    <span class="nd">@ClassProperty</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_next_class</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Multi-subclasses should use the parent class</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span>
            <span class="n">class_</span>
            <span class="k">for</span> <span class="n">class_</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">__mro__</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">Multi</span><span class="p">)</span>
        <span class="p">)</span>


<span class="k">class</span> <span class="nc">tempdir</span><span class="p">(</span><span class="n">Path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A temporary directory via :func:`tempfile.mkdtemp`, and constructed with the</span>
<span class="sd">    same parameters that you can use as a context manager.</span>

<span class="sd">    Example:</span>

<span class="sd">        with tempdir() as d:</span>
<span class="sd">            # do stuff with the Path object &quot;d&quot;</span>

<span class="sd">        # here the directory is deleted automatically</span>

<span class="sd">    .. seealso:: :func:`tempfile.mkdtemp`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@ClassProperty</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_next_class</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Path</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">dirname</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">tempdir</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">dirname</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exc_value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">_multi_permission_mask</span><span class="p">(</span><span class="n">mode</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Support multiple, comma-separated Unix chmod symbolic modes.</span>

<span class="sd">    &gt;&gt;&gt; _multi_permission_mask(&#39;a=r,u+w&#39;)(0) == 0o644</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">compose</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">:</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">g</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">compose</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="n">_permission_mask</span><span class="p">,</span> <span class="n">mode</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)))</span>


<span class="k">def</span> <span class="nf">_permission_mask</span><span class="p">(</span><span class="n">mode</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a Unix chmod symbolic mode like ``&#39;ugo+rwx&#39;`` to a function</span>
<span class="sd">    suitable for applying to a mask to affect that change.</span>

<span class="sd">    &gt;&gt;&gt; mask = _permission_mask(&#39;ugo+rwx&#39;)</span>
<span class="sd">    &gt;&gt;&gt; mask(0o554) == 0o777</span>
<span class="sd">    True</span>

<span class="sd">    &gt;&gt;&gt; _permission_mask(&#39;go-x&#39;)(0o777) == 0o766</span>
<span class="sd">    True</span>

<span class="sd">    &gt;&gt;&gt; _permission_mask(&#39;o-x&#39;)(0o445) == 0o444</span>
<span class="sd">    True</span>

<span class="sd">    &gt;&gt;&gt; _permission_mask(&#39;a+x&#39;)(0) == 0o111</span>
<span class="sd">    True</span>

<span class="sd">    &gt;&gt;&gt; _permission_mask(&#39;a=rw&#39;)(0o057) == 0o666</span>
<span class="sd">    True</span>

<span class="sd">    &gt;&gt;&gt; _permission_mask(&#39;u=x&#39;)(0o666) == 0o166</span>
<span class="sd">    True</span>

<span class="sd">    &gt;&gt;&gt; _permission_mask(&#39;g=&#39;)(0o157) == 0o107</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># parse the symbolic mode</span>
    <span class="n">parsed</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(?P&lt;who&gt;[ugoa]+)(?P&lt;op&gt;[-+=])(?P&lt;what&gt;[rwx]*)$&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">parsed</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Unrecognized symbolic mode&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>

    <span class="c"># generate a mask representing the specified permission</span>
    <span class="n">spec_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">specs</span> <span class="o">=</span> <span class="p">(</span><span class="n">spec_map</span><span class="p">[</span><span class="n">perm</span><span class="p">]</span> <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">parsed</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">&#39;what&#39;</span><span class="p">))</span>
    <span class="n">spec</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">or_</span><span class="p">,</span> <span class="n">specs</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c"># now apply spec to each subject in who</span>
    <span class="n">shift_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">o</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">who</span> <span class="o">=</span> <span class="n">parsed</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">&#39;who&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;ugo&#39;</span><span class="p">)</span>
    <span class="n">masks</span> <span class="o">=</span> <span class="p">(</span><span class="n">spec</span> <span class="o">&lt;&lt;</span> <span class="n">shift_map</span><span class="p">[</span><span class="n">subj</span><span class="p">]</span> <span class="k">for</span> <span class="n">subj</span> <span class="ow">in</span> <span class="n">who</span><span class="p">)</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">or_</span><span class="p">,</span> <span class="n">masks</span><span class="p">)</span>

    <span class="n">op</span> <span class="o">=</span> <span class="n">parsed</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">&#39;op&#39;</span><span class="p">)</span>

    <span class="c"># if op is -, invert the mask</span>
    <span class="k">if</span> <span class="n">op</span> <span class="o">==</span> <span class="s">&#39;-&#39;</span><span class="p">:</span>
        <span class="n">mask</span> <span class="o">^=</span> <span class="mo">0o777</span>

    <span class="c"># if op is =, retain extant values for unreferenced subjects</span>
    <span class="k">if</span> <span class="n">op</span> <span class="o">==</span> <span class="s">&#39;=&#39;</span><span class="p">:</span>
        <span class="n">masks</span> <span class="o">=</span> <span class="p">(</span><span class="mo">0o7</span> <span class="o">&lt;&lt;</span> <span class="n">shift_map</span><span class="p">[</span><span class="n">subj</span><span class="p">]</span> <span class="k">for</span> <span class="n">subj</span> <span class="ow">in</span> <span class="n">who</span><span class="p">)</span>
        <span class="n">retain</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">or_</span><span class="p">,</span> <span class="n">masks</span><span class="p">)</span> <span class="o">^</span> <span class="mo">0o777</span>

    <span class="n">op_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;+&#39;</span><span class="p">:</span> <span class="n">operator</span><span class="o">.</span><span class="n">or_</span><span class="p">,</span>
        <span class="s">&#39;-&#39;</span><span class="p">:</span> <span class="n">operator</span><span class="o">.</span><span class="n">and_</span><span class="p">,</span>
        <span class="s">&#39;=&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">mask</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">target</span> <span class="o">&amp;</span> <span class="n">retain</span> <span class="o">^</span> <span class="n">mask</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">op_map</span><span class="p">[</span><span class="n">op</span><span class="p">],</span> <span class="n">mask</span><span class="p">)</span>


<div class="viewcode-block" id="CaseInsensitivePattern"><a class="viewcode-back" href="../measures.html#path.CaseInsensitivePattern">[docs]</a><span class="k">class</span> <span class="nc">CaseInsensitivePattern</span><span class="p">(</span><span class="n">text_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A string with a ``&#39;normcase&#39;`` property, suitable for passing to</span>
<span class="sd">    :meth:`listdir`, :meth:`dirs`, :meth:`files`, :meth:`walk`,</span>
<span class="sd">    :meth:`walkdirs`, or :meth:`walkfiles` to match case-insensitive.</span>

<span class="sd">    For example, to get all files ending in .py, .Py, .pY, or .PY in the</span>
<span class="sd">    current directory::</span>

<span class="sd">        from path import Path, CaseInsensitivePattern as ci</span>
<span class="sd">        Path(&#39;.&#39;).files(ci(&#39;*.py&#39;))</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">normcase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">__import__</span><span class="p">(</span><span class="s">&#39;ntpath&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">normcase</span></div>

<span class="c">########################</span>
<span class="c"># Backward-compatibility</span>
<span class="k">class</span> <span class="nc">path</span><span class="p">(</span><span class="n">Path</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;path is deprecated. Use Path instead.&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Path</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="n">__all__</span> <span class="o">+=</span> <span class="p">[</span><span class="s">&#39;path&#39;</span><span class="p">]</span>
<span class="c">########################</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">biobox 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Matteo Degiacomi.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
  </body>
</html>